!function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory:root.fluidvids=factory()}(this,function(){"use strict";var exports={selector:"iframe",players:["www.youtube.com","player.vimeo.com"]},head=document.head||document.getElementsByTagName("head")[0],css=".fluidvids{width:100%;position:relative;}.fluidvids iframe{position:absolute;top:0px;left:0px;width:100%;height:100%;}",_matches=function(source){var regexp=new RegExp("^(https?:)?//(?:"+exports.players.join("|")+").*$","i");return regexp.test(source)},_render=function(elem){if(!elem.getAttribute("data-fluidvids")){var wrap=document.createElement("div"),ratio=parseInt(elem.height?elem.height:elem.offsetHeight,10)/parseInt(elem.width?elem.width:elem.offsetWidth,10)*100;elem.parentNode.insertBefore(wrap,elem),elem.setAttribute("data-fluidvids","loaded"),wrap.className+="fluidvids",wrap.style.paddingTop=ratio+"%",wrap.appendChild(elem)}},_addStyles=function(){var div=document.createElement("div");div.innerHTML="<p>x</p><style>"+css+"</style>",head.appendChild(div.childNodes[1])};return exports.apply=function(){for(var nodes=document.querySelectorAll(exports.selector),i=0;i<nodes.length;i++){var node=nodes[i];_matches(node.src)&&_render(node)}},exports.init=function(obj){for(var key in obj)exports[key]=obj[key];exports.apply(),_addStyles()},exports});